% font packages
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{mathrsfs}

% more math operators' support
\usepackage{physics}

% Boldface
\usepackage{bm}

% Tikz
\usepackage{tikz}
\usetikzlibrary{calc}

% Gaussian Elimination
\usepackage{gauss}

% Commutative Graph
\usepackage[all]{xy}

% Comment
\usepackage{comment}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
                            %------------- Miscellaneous -------------%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% \makeatletter
% \renewcommand{\thefootnote}{\textcircled{\arabic{footnote}}}
% \def\nosuper@makefnmark{\hbox{\normalfont\@thefnmark\space}}
% \let\save@makefntext\@makefntext
% \long\def\@makefntext#1{{%
% \let\@makefnmark\nosuper@makefnmark
% \save@makefntext{#1}}}
% \makeatother

% 猫猫特供引用指令: \catref[]{}{}[]
\NewDocumentCommand{\catref}{ommo}{
    \@ifundefined{r@#2}
    {\IfBooleanTF{#1}
        {#3\footnote{#3: \IfNoValueTF{#4}{未定义}{#4}}}
        {#3}
    }
    {\hyperref[#2]{#3}}
}

% 参数说明: 
% #1: 一个 Boolean 参数, 建议直接传递星号参数的值, 表示是否需要下标. 
% #2: UUID
% #3: 算子表达式
% #4: 脚注内容

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
                            %------------- Mathematical Operators -------------%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% 定义 / 定理声明

\NewDocumentCommand{\DEF}{sommo}{%
    \IfNoValueTF{#2}{}{设#2, }定义\textbf{#3}\IfBooleanTF{#1}{当且仅当}{为}: #4\IfNoValueTF{#5}{}{, 记作#5}. %
}
\NewDocumentCommand{\THM}{om}{设#1, 则: #2}
\NewDocumentCommand{\type}{smm}{\IfBooleanTF{#1}
    {#2是#3}
    {\ensuremath{#2:#3}}
}

% 基本算子

% 自然数
\NewDocumentCommand{\N}{s}{\catref[#1]{dfn:Nat}{\ensuremath{\mathbb{N}}}[自然数]}
\NewDocumentCommand{\Z}{s}{\catref[#1]{dfn:Int}{\ensuremath{\mathbb{Z}}}[整数]}
\NewDocumentCommand{\Q}{s}{\catref[#1]{dfn:Rat}{\ensuremath{\mathbb{Q}}}[有理数]}
\NewDocumentCommand{\R}{s}{\catref[#1]{dfn:Real}{\ensuremath{\mathbb{R}}}[实数]}
\NewDocumentCommand{\C}{s}{\catref[#1]{dfn:Complex}{\ensuremath{\mathbb{C}}}[复数]}

% 二元对
\NewDocumentCommand{\pair}{smm}{\catref[#1]{dfn:OrderedPair}{\ensuremath{\left(#2,#3\right)}}[有序对]}


\DeclareMathOperator{\Id}{\hyperref[dfn:IdMap]{Id}}                           % Identity

\DeclareMathOperator{\Ker}{\hyperref[dfn:Kernel]{Ker}}                         % Kernel of a Homomorphism ($\ker$ is included in package amsmath)

\let\Im\originalIm
\DeclareMathOperator{\Im}{\hyperref[dfn:Image]{Im}}                        % Image of a mapping

% Set Theory
\DeclareMathOperator{\PP}{\mathcal{P}}                  % Power Sets
\DeclareMathOperator{\card}{card}                       % Cardinality

%Linear Algebra
\DeclareMathOperator{\B}{\mathcal{B}}
\DeclareMathOperator{\A}{\mathbf{A}}
\DeclareMathOperator{\bv}{\mathbf{\beta}}
\DeclareMathOperator{\p}{\mathbf{p}}
\DeclareMathOperator{\Range}{\operatorname{Range}}      % Range

%Apology
\DeclareMathOperator{\Con}{Con}
\DeclareMathOperator{\V}{\mathcal{V}}  

% Category Theory
\DeclareMathOperator{\Cat}{\mathcal{C}}                 % Category

\DeclareMathOperator{\Hom}{Hom}                         % Set of Homomorphisms
\DeclareMathOperator{\End}{End}                         % Set of Endomorphisms
\DeclareMathOperator{\Aut}{Aut}                         % Set of Automorphisms
\DeclareMathOperator{\Isom}{Isom}                       % Set of Isomorphisms

\DeclareMathOperator{\Ob}{Ob}                           % Objects of a Category
\DeclareMathOperator{\Mor}{Mor}                         % Morphisms of a Category

% Abstract Algebra
\DeclareMathOperator{\stab}{stab}                       % Stabilizer

% Topology
\DeclareMathOperator{\T}{\mathcal{T}}                   % Topology

\DeclareMathOperator{\intr}{int}                        % Interior
\DeclareMathOperator{\cl}{cl}                           % Closure

\DeclareMathOperator{\U}{\overset{\circ}{\mathit{U}}}   % Deleted Neighbourhood

% Linear Algebra

\DeclareMathOperator{\K}{\mathbb{K}}                    % Number Field
\DeclareMathOperator{\F}{\mathbb{F}}                    % Number Field (F)

\DeclareMathOperator{\diag}{\text{diag}}                % Diagonal Matrix
\DeclareMathOperator{\al}{\bm\alpha}                    % Boldfaced vector alpha
\DeclareMathOperator{\bt}{\bm\beta}                     % Boldfaced vector beta
\DeclareMathOperator{\x}{\bm{x}}                        % Boldfaced vector x
\DeclareMathOperator{\0}{\mathbf{0}}                    % Boldfaced vector x

\newcommand{\Jd}[2]{\mathrm{J}_{#1}{(#2)}}              % Jordan Blocks

\DeclareMathOperator{\CCol}{Col}                        % Column Space
\DeclareMathOperator{\RRow}{Row}                        % Row Space
\DeclareMathOperator{\Null}{Null}                       % Null Space
\DeclareMathOperator{\rmT}{\mathrm{T}}                  % Transpose

\newcommand{\spn}{\mathrm{span}\text{ }}                % Span

\DeclareMathOperator{\adj}{adj}                         % adj Matrix

\newcommand{\GL}[2]{\mathrm{GL}_{#1}(#2)}               % General Linear Group
\newcommand{\SL}[2]{\mathrm{SL}_{#1}(#2)}               % Special Linear Group

\DeclareMathOperator{\lcm}{lcm}                         % LCM

\newcommand{\<}{\langle}                                
\renewcommand{\>}{\rangle}                              % These two for ordinary Hilbert Inner Products <x,y>
\newcommand{\inprod}[2]{\left\<#1,#2\right\>}           % Using $\expval{#1}$ (Included in package physics) can replace \<#1\>.

\newcommand{\ocinterval}[2]{\left(#1,#2\right]}         % Open-Closed Interval
\newcommand{\cointerval}[2]{\left[#1,#2\right)}         % Closed-Open Interval
\newcommand{\ccinterval}[2]{\left[#1,#2\right]}         % Closed-Closed Interval
\newcommand{\oointerval}[2]{\left(#1,#2\right)}         % Open-Open 

% Four above should be deprecated

\newcommand{\Ioc}[2]{\left(#1,#2\right]}                % Open-Closed Interval
\newcommand{\Ico}[2]{\left[#1,#2\right)}                % Closed-Open Interval
\newcommand{\Icc}[2]{\left[#1,#2\right]}                % Closed Interval
\newcommand{\Ioo}[2]{\left(#1,#2\right)}                % Open Interval

% Mathematical Analysis

\DeclareMathOperator*{\ulim}{\overline{\lim}}
\DeclareMathOperator*{\llim}{\underline{\lim}}
\newcommand{\diff}[3]{\left. #1 \right|_{#2}^{#3}}      % This command can be replaced by $\eval{#1}_{#2}^{#3}$ in package physics.

\newcommand{\Ball}[2]{\mathcal{B}\left(#1,#2\right)}	% Open Ball